// GLOBAL //

// Hyperlink icon
a[target="_blank"]::after,
.btn[target="_blank"]::after
    content: none !important

// Email icon
footer .email::after
    content: "\eef3" !important

// Footer address
footer address
    @include meta
    font-family: $heading-font-family
    font-style: normal

// HOMEPAGE //

// Header
.page__home header:not(.is-sticky)
    .search-button--primary
        color: $color-background
    .menu a,
    .menu span
        color: $color-background
    .header-button
        color: $color-background !important
        span
            color: $color-background !important
        span::before
            color: $color-background !important
    .logo img
        content: url("/assets/images/logo-blanc.png")
// Switch to black logo and menu button when dropdown menu is open
.page__home header:not(.is-sticky):has([aria-expanded="true"])
    .logo img
        content: url("/assets/images/logo-contour-noir.png")
    .header-button
        color: $color-text !important
        span
            color: $color-text !important
        span::before
            color: $color-text !important

// Hero
.page__home .hero
    background-image: url('/assets/images/hero-homepage-background-image.jpg')
    background-size: cover
    background-position: center
    background-repeat: no-repeat
    position: relative
    overflow: hidden
    color: $color-background
    min-height: 50vh
    h1
        word-spacing: 100vw

// Chapter block
.page__home .block-class-two-columns-chapter
    .chapter
        @include media-breakpoint-up(desktop)
            .text
                width: 100%
    .rich-text
        @include media-breakpoint-up(desktop)
            display: grid
            grid-template-columns: repeat(2, columns(6))
            column-gap: var(--grid-gutter)
            row-gap: $spacing-3
            p
                margin: 0 !important
            p:nth-child(1)
                grid-column: 1
                grid-row: 1
            p:nth-child(2)
                grid-column: 1
                grid-row: 2
            p:nth-child(3)
                grid-column: 1
                grid-row: 3
            p:nth-child(4)
                grid-column: 2
                grid-row: 1
                grid-row-end: 4
                @include h2

// Pages block
.page__home .block-class-pages-cards
    .block-content .top .description
        @include body-text
    @include media-breakpoint-up(desktop)
        .block-content
            display: grid
            grid-template-columns: repeat(12, 1fr)
            column-gap: var(--grid-gutter)
            .top
                grid-column: 1 / 13
                grid-row: 1
            .pages
                grid-column: 5 / 13
                grid-row: 2
                display: grid
                grid-template-columns: repeat(2, 1fr)
                gap: var(--grid-gutter)
                li
                    margin: 0

// CTA block
.block-class-with-cover
    .actions a
        @include icon(arrow-right-line, after)
        &::after
            margin-left: $spacing-2
            content: "\ea6c" !important
    // Make title display as default h2
    .block-title
        font-family: $h2-font-family !important
        font-size: var(--h2-size) !important
        font-weight: $h2-weight !important
        line-height: var(--h2-line-height) !important
        font-style: $h2-style !important
        text-transform: $h2-text-transform !important
        letter-spacing: $h2-letter-spacing !important
    // Make description text plain body text instead of h2
    .call_to_action .description p
        font-family: $body-font-family !important
        font-size: var(--body-size) !important
        line-height: var(--body-line-height) !important
        font-weight: normal !important
        letter-spacing: $body-letter-spacing !important
        text-transform: none !important
    // Image takes columns 7-13 (6 columns wide)
    .call_to_action--with-image > figure
        grid-column: 7 / 13 !important

// Ã‰CO-CONCEPTION, COLLABORATION, ACV chapter blocks
.block-class-three-columns-chapter-one,
.block-class-three-columns-chapter-two,
.block-class-three-columns-chapter-three
    @include media-breakpoint-up(desktop)
        float: left
        width: calc(100% / 3)
        max-width: calc(var(--grid-max-width) / 3)
        .container
            max-width: 100%
            // Inner columns: half gutter on each side
            padding-left: calc(var(--grid-gutter) / 2)
            padding-right: calc(var(--grid-gutter) / 2)
        .chapter .text
            width: 100%
    .block-title
        font-weight: bold

// First column
.block-class-three-columns-chapter-one
    @include media-breakpoint-up(desktop)
        margin-left: Max(0px, calc((100% - var(--grid-max-width)) / 2))
        .container
            padding-left: var(--grid-gutter)

// Third column
.block-class-three-columns-chapter-three
    @include media-breakpoint-up(desktop)
        .container
            padding-right: var(--grid-gutter)
    // Clear float after the three columns
    + *
        @include media-breakpoint-up(desktop)
            clear: both

// Organisations block
.organizations
    @include grid(8)
    .media
        background: none
        padding: 0
.organization 
    .organization-title
        opacity: 0
        height: 0
        overflow: hidden
    .media
        img
            mix-blend-mode: multiply



// ABOUT-US PAGE //

// Header
.page-qui-sommes-nous header:not(.is-sticky)
    .search-button--primary
        color: $color-background
    .menu a,
    .menu span
        color: $color-background
    .header-button
        color: $color-background !important
        span
            color: $color-background !important
        span::before
            color: $color-background !important
    .logo img
        content: url("/assets/images/logo-blanc.png")
// Switch to black logo and menu button when dropdown menu is open
.page-qui-sommes-nous header:not(.is-sticky):has([aria-expanded="true"])
    .logo img
        content: url("/assets/images/logo-contour-noir.png")
    .header-button
        color: $color-text !important
        span
            color: $color-text !important
        span::before
            color: $color-text !important

// Breadcrumb
.page-qui-sommes-nous .breadcrumb
    li
        &, a
            color: $color-background
        &.active
            color: $color-background
        &:not(:first-child)::before
            color: $color-background

// Hero
.page-qui-sommes-nous .hero
    background-image: url('/assets/images/hero-about-us-background-image.jpg')
    background-size: cover
    background-position: center
    background-repeat: no-repeat
    position: relative
    overflow: hidden
    color: $color-background
    min-height: 50vh

// Chapter block
.block-class-centered-chapter
    @include in-page-without-sidebar
        .chapter
            justify-content: center
            .text
                width: columns(8)

// Definitions block
.block-class-definitions-about-us-page
    @include in-page-without-sidebar
        .definitions
            width: columns(8)
            margin-left: auto
            margin-right: auto
            details p
                padding-left: 0
                margin-left: 0
            details summary:hover
                font-weight: bold
            details:hover::after
                border-bottom-color: $color-accent-about-us
                border-bottom-width: calc(var(--border-width) * 3)

// CTA block
.block-class-right-aligned-button
    @include in-page-without-sidebar
        .call_to_action
            width: columns(8)
            margin-left: auto
            margin-right: auto
            display: flex
            justify-content: flex-end
            .actions a
                margin-right: 0
    .actions a
        @include icon(arrow-right-line, after)
        &::after
            margin-left: $spacing-2
            content: "\ea6c" !important

// People block
.block-class-people
    .person-role p
        br
            display: block
            content: ""
            margin-top: $spacing-2



// SUPPORT PAGE //

// Chapter block
.block-class-right-aligned-chapter
    @include in-page-without-sidebar
        .chapter
            width: columns(8)
            margin-left: auto
            margin-right: 0
            .text
                width: 100%

// CTA buttons chapter
.block-class-right-aligned-chapter + .block-call_to_action
    @include in-page-without-sidebar
        .call_to_action
            width: columns(8)
            margin-left: auto
            margin-right: 0
    .actions
        display: flex
        flex-wrap: wrap
        gap: $spacing-3
        a
            --btn-background: #{$block-call-to-action-button-background}
            --btn-border: #{$block-call-to-action-button-border}
            --btn-color: #{$block-call-to-action-button-color}
            --btn-hover-background: #{$block-call-to-action-button-hover-background}
            --btn-hover-border: #{$block-call-to-action-button-hover-border}
            --btn-hover-color: #{$block-call-to-action-button-hover-color}
            --btn-min-width: #{columns(2)}
            @extend .button
            text-decoration: none
            margin: 0
            @include icon(arrow-right-line, after)
            &::after
                margin-left: $spacing-2
                content: "\ea6c" !important

// SERVICES PAGES //

// Pages cards
.block-pages--grid.with-images
    .pages
        @include media-breakpoint-up(desktop)
            display: grid
            grid-template-columns: repeat(4, 1fr)
            gap: var(--grid-gutter)
    article .media img
        aspect-ratio: auto
        object-fit: contain
        max-height: 300px

// Chapter block
.block-class-chapter-title .chapter .block-title
    font-family: $heading-font-family
    font-size: var(--h2-size)
    font-weight: $h2-weight
    line-height: var(--h2-line-height)
    font-style: $h2-style
    text-transform: $h2-text-transform
    letter-spacing: $h2-letter-spacing

// CTA block
.block-class-right-aligned-cta .call_to_action .description p
    font-family: $heading-font-family
    font-size: var(--body-size)
    line-height: var(--body-line-height)
    font-weight: normal
    letter-spacing: $body-letter-spacing
    text-transform: none

.block-class-right-aligned-cta .actions a
    @include icon(arrow-right-line, after)
    &::after
        margin-left: $spacing-2
        content: "\ea6c" !important

// CONSULTING PAGE //

// Definitions block
.block-class-right-aligned-definitions-consulting
    @include in-page-with-sidebar
        .definitions
            details summary:hover
                font-weight: bold
            details:hover::after
                border-bottom-color: $color-accent-consulting
                border-bottom-width: calc(var(--border-width) * 3)

// TRAINING PAGE //

// Definitions block
.block-class-right-aligned-definitions-training
    @include in-page-with-sidebar
        .definitions
            details summary:hover
                font-weight: bold
            details:hover::after
                border-bottom-color: $color-accent-training
                border-bottom-width: calc(var(--border-width) * 3)

// ADVOCACY PAGE

// Image block
.block.block-class-right-aligned-image
    margin-top: $spacing-5 !important

// MATERIAL LIBRARY PAGE //

// Gallery block
.block-class-custom-grid
    @include in-page-with-sidebar
        .gallery
            @include flexbox-grid(3)
            figure picture
                aspect-ratio: 1 / 1
                img
                    width: 100%
                    height: 100%
                    object-fit: cover

// Definitions block
.block-class-right-aligned-definitions-material-library
    @include in-page-with-sidebar
        .definitions
            details summary:hover
                font-weight: bold
            details:hover::after
                border-bottom-color: $color-accent-material-library
                border-bottom-width: calc(var(--border-width) * 3)
            // Image inside "4. Nous trouver" definition
            details:nth-child(4) [itemprop="description"]::after
                content: ""
                display: block
                margin-top: $spacing-3
                width: 100%
                aspect-ratio: 16 / 9
                background-image: url("/assets/images/plan-locaux.jpg")
                background-size: cover
                background-repeat: no-repeat
                background-position: center