// Disable all hyperlink icons across the whole website
a[target="_blank"]::after,
.btn[target="_blank"]::after
    content: none !important

// Replace @ icon with envelope icon for email links
footer .email::after
    content: "\eef3" !important

// Address in footer uses Franklin Gothic ATF font
footer address
    @include meta
    font-family: $heading-font-family
    font-style: normal

// HOMEPAGE //

// Header logo and menu hero
.page__home header:not(.is-sticky)
    .search-button--primary
        color: $color-text-alt
    .menu a,
    .menu span
        color: $color-text-alt
    .header-button
        color: $color-text-alt !important
        span
            color: $color-text-alt !important
        span::before
            color: $color-text-alt !important
    .logo img
        content: url("/assets/images/logo-blanc.png")
// Switch to black logo and menu button when dropdown menu is open
.page__home header:not(.is-sticky):has([aria-expanded="true"])
    .logo img
        content: url("/assets/images/logo-contour-noir.png")
    .header-button
        color: $color-text !important
        span
            color: $color-text !important
        span::before
            color: $color-text !important

// Hero image and title
.page__home .hero
    background-image: url('/assets/images/hero-homepage-background-image.jpg')
    background-size: cover
    background-position: center
    background-repeat: no-repeat
    position: relative
    overflow: hidden
    color: $color-text-alt
    min-height: 50vh
    h1
        word-spacing: 100vw

// Two-column intro chapter layout
.page__home .block-class-two-columns-chapter
    .chapter
        @include media-breakpoint-up(desktop)
            .text
                width: 100%
    .rich-text
        @include media-breakpoint-up(desktop)
            display: grid
            grid-template-columns: repeat(2, columns(6))
            column-gap: var(--grid-gutter)
            row-gap: $spacing-3
            p
                margin: 0 !important
            p:nth-child(1)
                grid-column: 1
                grid-row: 1
            p:nth-child(2)
                grid-column: 1
                grid-row: 2
            p:nth-child(3)
                grid-column: 1
                grid-row: 3
            p:nth-child(4)
                grid-column: 2
                grid-row: 1
                grid-row-end: 4
                @include h2

// Services pages cards - 2x2 grid below summary, aligned with description left edge
.page__home .block-class-pages-cards
    .block-content .top .description
        @include body-text
    @include media-breakpoint-up(desktop)
        .block-content
            display: grid
            grid-template-columns: repeat(12, 1fr)
            column-gap: var(--grid-gutter)
            .top
                grid-column: 1 / 13
                grid-row: 1
            .pages
                grid-column: 5 / 13
                grid-row: 2
                display: grid
                grid-template-columns: repeat(2, 1fr)
                gap: var(--grid-gutter)
                li
                    margin: 0

// CTA block
.block-class-with-cover
    .actions a
        @include icon(arrow-right-line, after)
        &::after
            margin-left: $spacing-2
            content: "\ea6c" !important
    // Make title display as default h2
    .block-title
        font-family: $h2-font-family !important
        font-size: var(--h2-size) !important
        font-weight: $h2-weight !important
        line-height: var(--h2-line-height) !important
        font-style: $h2-style !important
        text-transform: $h2-text-transform !important
        letter-spacing: $h2-letter-spacing !important
    // Make description text plain body text instead of h2
    .call_to_action .description p
        font-family: $body-font-family !important
        font-size: var(--body-size) !important
        line-height: var(--body-line-height) !important
        font-weight: normal !important
        letter-spacing: $body-letter-spacing !important
        text-transform: none !important
    // Image takes columns 7-13 (6 columns wide)
    .call_to_action--with-image > figure
        grid-column: 7 / 13 !important

// Ã‰CO-CONCEPTION, COLLABORATION, ACV chapters
.block-class-three-columns-chapter-one,
.block-class-three-columns-chapter-two,
.block-class-three-columns-chapter-three
    @include media-breakpoint-up(desktop)
        float: left
        width: calc(100% / 3)
        max-width: calc(var(--grid-max-width) / 3)
        .container
            max-width: 100%
            // Inner columns: half gutter on each side
            padding-left: calc(var(--grid-gutter) / 2)
            padding-right: calc(var(--grid-gutter) / 2)
        .chapter .text
            width: 100%
    .block-title
        font-weight: bold

// First column: full gutter on left edge to align with grid + center offset on large screens
.block-class-three-columns-chapter-one
    @include media-breakpoint-up(desktop)
        margin-left: Max(0px, calc((100% - var(--grid-max-width)) / 2))
        .container
            padding-left: var(--grid-gutter)

// Third column: full gutter on right edge to align with grid
.block-class-three-columns-chapter-three
    @include media-breakpoint-up(desktop)
        .container
            padding-right: var(--grid-gutter)
    // Clear float after the three columns
    + *
        @include media-breakpoint-up(desktop)
            clear: both

// Partners section
.organizations
    @include grid(8)
    .media
        background: none
        padding: 0
.organization 
    .organization-title
        opacity: 0
        height: 0
        overflow: hidden
    .media
        img
            mix-blend-mode: multiply



// ABOUT-US PAGE

// Header logo and menu hero
.page-qui-sommes-nous header:not(.is-sticky)
    .search-button--primary
        color: $color-text-alt
    .menu a,
    .menu span
        color: $color-text-alt
    .header-button
        color: $color-text-alt !important
        span
            color: $color-text-alt !important
        span::before
            color: $color-text-alt !important
    .logo img
        content: url("/assets/images/logo-blanc.png")
// Switch to black logo and menu button when dropdown menu is open
.page-qui-sommes-nous header:not(.is-sticky):has([aria-expanded="true"])
    .logo img
        content: url("/assets/images/logo-contour-noir.png")
    .header-button
        color: $color-text !important
        span
            color: $color-text !important
        span::before
            color: $color-text !important

// Breadcrumb navigation
.page-qui-sommes-nous .breadcrumb
    li
        &, a
            color: $color-text-alt
        &.active
            color: $color-text-alt
        &:not(:first-child)::before
            color: $color-text-alt

// Hero image and title
.page-qui-sommes-nous .hero
    background-image: url('/assets/images/hero-about-us-background-image.jpg')
    background-size: cover
    background-position: center
    background-repeat: no-repeat
    position: relative
    overflow: hidden
    color: $color-text-alt
    min-height: 50vh

// Chapter block
.block-class-centered-chapter
    @include in-page-without-sidebar
        .chapter
            justify-content: center
            .text
                width: columns(8)

// Definitions block
.block-class-definitions-about-us-page
    @include in-page-without-sidebar
        .definitions
            width: columns(8)
            margin-left: auto
            margin-right: auto
            details p
                padding-left: 0
                margin-left: 0
            details summary:hover
                font-weight: bold
            details:hover::after
                border-bottom-color: $color-accent-about-us
                border-bottom-width: calc(var(--border-width) * 3)

// CTA block
.block-class-right-aligned-button
    @include in-page-without-sidebar
        .call_to_action
            width: columns(8)
            margin-left: auto
            margin-right: auto
            display: flex
            justify-content: flex-end
            .actions a
                margin-right: 0
    .actions a
        @include icon(arrow-right-line, after)
        &::after
            margin-left: $spacing-2
            content: "\ea6c" !important

// People block
.block-class-people
    .person-role p
        br
            display: block
            content: ""
            margin-top: $spacing-2

// SUPPORT PAGE

// Chapter block
.block-class-right-aligned-chapter
    @include in-page-without-sidebar
        .chapter
            width: columns(8)
            margin-left: auto
            margin-right: 0
            .text
                width: 100%

// CTA buttons chapter
.block-class-right-aligned-chapter + .block-call_to_action
    @include in-page-without-sidebar
        .call_to_action
            width: columns(8)
            margin-left: auto
            margin-right: 0
    .actions
        display: flex
        flex-wrap: wrap
        gap: $spacing-3
        a
            --btn-background: #{$block-call-to-action-button-background}
            --btn-border: #{$block-call-to-action-button-border}
            --btn-color: #{$block-call-to-action-button-color}
            --btn-hover-background: #{$block-call-to-action-button-hover-background}
            --btn-hover-border: #{$block-call-to-action-button-hover-border}
            --btn-hover-color: #{$block-call-to-action-button-hover-color}
            --btn-min-width: #{columns(2)}
            @extend .button
            text-decoration: none
            margin: 0
            @include icon(arrow-right-line, after)
            &::after
                margin-left: $spacing-2
                content: "\ea6c" !important